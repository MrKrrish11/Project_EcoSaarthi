<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Future Wealth Builder | EcoSaarthi</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">

    <!-- FINAL CORRECTED CSS -->
    <style>
        /* --- CORE STYLES --- */
        .hidden { display: none !important; }
        #quiz-container { display: flex; justify-content: center; align-items: center; width: 100%; min-height: 70vh; }
        .quiz-question { margin-bottom: 1.5rem; text-align: left; }
        .quiz-question p { font-weight: 600; margin-bottom: 0.75rem; }
        .quiz-options { list-style: none; padding-left: 0; margin: 0; }
        .quiz-options li { margin-bottom: 0.5rem; display: flex; align-items: center; }
        .quiz-options input[type="radio"] { margin-right: 10px; width: 1.2em; height: 1.2em; accent-color: #007bff; }
        .quiz-options label { font-weight: 400; }
        .form-group { margin-bottom: 1rem; }
        .form-group input { width: 100%; padding: 0.6rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }

        /* --- POST-QUIZ LAYOUT STYLES --- */
        #post-quiz-row { display: flex; align-items: flex-start; gap: 1.5rem; }
        #investor-profile-card { flex: 0 0 280px; display: flex; flex-direction: column; padding: 1.25rem; }
        #profile-summary h3 { margin: 0; font-size: 1.1em; color: #0056b3; }
        #risk-profile-result { font-weight: 500; color: #007bff; }
        #profile-summary p { margin: 4px 0 0.75rem 0; font-size: 0.9em; color: #555e68; }
        #post-quiz-content { flex-grow: 1; }

        /* --- TAB NAVIGATION STYLES --- */
        .content-tabs { display: flex; border-bottom: 2px solid #e1e8ed; margin-bottom: 1.5rem; }
        .tab-wrapper { flex-basis: 50%; }
        .tab-button { padding: 0.8rem 0; cursor: pointer; background-color: transparent; border: none; font-size: 1em; font-weight: 600; color: #555e68; border-bottom: 3px solid transparent; }
        .tab-button.active { color: #007bff; border-bottom-color: #007bff; }

        /* --- TOOLS CONTAINER STYLES --- */
        #tools-container { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
        .tool-card { display: flex; flex-direction: column; padding: 1.5rem; }
        .tool-card h3 { margin-top: 0; margin-bottom: 1.5rem; font-size: 1.2em; }
        .investment-list { list-style-type: disc; padding-left: 20px; }
        .investment-list li { margin-bottom: 0.5rem; }
        
        /* --- STYLES FOR IN-CARD RESULTS & SIP LIST --- */
        .in-card-result { margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid #eee; }
        .in-card-result p { display: flex; justify-content: space-between; margin: 0.5rem 0; font-size: 0.9em; }
        #sip-list { flex-grow: 1; margin-bottom: 1rem; }
        .sip-item { display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #eee; font-size: 0.9em; }
        #add-sip-btn { margin-top: auto; }

        /* --- STYLES FOR THE FINAL PROJECTION CARD & BUTTON --- */
        #projection-button-container {
            text-align: left;
            margin-top: 1.5rem;
        }
        #retirement-projection-card {
            margin-top: 1.5rem;
            background-color: #2c2a4a;
            color: #fff;
            padding: 1.5rem 2rem;
            border: none;
        }
        #retirement-projection-card h3 {
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        .projection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        .projection-item p {
            margin: 0;
            color: #b0aac0;
            font-size: 1em;
        }
        .projection-item .result-value {
            font-weight: 500;
            color: #68d8d6;
        }
        .projection-item.final-corpus {
            border-bottom: none;
            padding-top: 1.5rem;
            padding-bottom: 0.5rem;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .projection-item.final-corpus p {
            font-size: 1.1em;
            font-weight: 500;
        }
        .projection-item.final-corpus .result-amount {
            font-size: 2.8em;
            font-weight: 700;
            color: #00bfff;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body class="future-wealth-page">
    <header>
        <nav class="navbar">
            <a href="/" class="nav-logo"><img src="images/FINAL LOGO.png" class="logo-image"><span class="nav-logo-text">EcoSaarthi</span></a>
            <ul class="nav-menu">
                <li class="nav-item"><a href="career-compass.html">Career</a></li>
                <li class="nav-item"><a href="pocket-cfo.html">Budget</a></li>
                <li class="nav-item"><a href="tax-buddy.html">Taxes</a></li>
                <li class="nav-item"><a href="genz-moneyverse.html">Learn</a></li>
                <li class="nav-item"><a href="future-wealth.html">Invest</a></li>
                <li class="nav-item"><a href="economy-radar.html">Economy</a></li>
                <li class="nav-item"><a href="opportunity-engine.html">Schemes</a></li>
                <li class="nav-item" id="dashboard-nav-item"><a href="dashboard.html">Dashboard</a></li>
                <li class="nav-item" id="login-nav-item"><a href="login.html" class="btn btn-primary">Login</a></li>
                <li class="nav-item" id="logout-nav-item"><button id="logout-button" class="btn btn-accent btn-nav-logout">Logout</button></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <!-- THIS SECTION HAS BEEN RESTORED -->
        <div class="page-header">
            <h1>Future Wealth Builder</h1>
            <p>From saving to investing. Plan for your long-term goals and build generational wealth.</p>
        </div>

        <div id="quiz-container">
            <div id="risk-quiz-card" class="card">
                <h3>What's Your Investor Personality?</h3>
                <p>Answer a few questions to get personalized investment suggestions.</p>
                <form id="risk-quiz-form"><button type="submit" class="btn btn-primary">Find My Profile</button></form>
            </div>
        </div>

        <div id="post-quiz-row" class="hidden">
            <div id="investor-profile-card" class="card">
                <div id="profile-summary">
                    <h3>Your Investor Profile: <span id="risk-profile-result"></span></h3>
                    <p id="risk-profile-description"></p>
                </div>
                <button id="retake-quiz-btn" class="btn btn-accent">Retake Quiz</button>
            </div>

            <div id="post-quiz-content">
                <div class="card">
                    <div class="content-tabs">
                        <div class="tab-wrapper"><button id="invest-tab-btn" class="tab-button active">Investment Simulation & Ideas</button></div>
                        <div class="tab-wrapper"><button id="tools-tab-btn" class="tab-button">Wealth Tools</button></div>
                    </div>
                    <div id="investment-ideas-section"><div id="investment-suggestions"></div></div>
                    <div id="tools-section" class="hidden">
                        <div id="tools-container">
                            <div class="card tool-card">
                                <h3>Retirement Planner</h3>
                                <form id="retirement-calc-form">
                                    <div class="form-group"><input type="number" id="current-age" placeholder="Current Age" required></div>
                                    <div class="form-group"><input type="number" id="retirement-age" placeholder="Target Retirement Age" required></div>
                                    <div class="form-group"><input type="number" id="current-savings" placeholder="Current Savings/Lump Sum (₹)" value="0"></div>
                                    <div class="form-group"><input type="number" id="monthly-investment" placeholder="Monthly Investment (₹)" required></div>
                                    <div class="form-group"><input type="number" id="return-rate" placeholder="Expected Annual Return (%)" value="7"></div>
                                </form>
                                <button type="button" id="plan-retirement-btn" class="btn btn-primary">Plan My Retirement</button>
                                <div id="retirement-planner-result" class="in-card-result hidden"></div>
                            </div>
                            <div class="card tool-card">
                                <h3>My SIP Tracker</h3>
                                <form id="sip-form">
                                    <div class="form-group"><input type="text" id="sip-name" placeholder="SIP Name (e.g., Nifty 50)" required></div>
                                    <div class="form-group"><input type="number" id="sip-amount" placeholder="Monthly Amount (₹)" required></div>
                                </form>
                                <div id="sip-list"></div>
                                <button type="button" id="add-sip-btn" class="btn btn-primary">Add SIP</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="projection-button-container" class="hidden">
                    <button id="show-projection-btn" class="btn btn-primary">Retirement Projection</button>
                </div>

                <div id="retirement-projection-card" class="card hidden">
                    <h3>Retirement Projection</h3>
                    <div id="retirement-projection-content"></div>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="site-footer"></footer>
    
    <script>
        // (All JavaScript is unchanged and correct from the previous version)
        document.addEventListener('DOMContentLoaded', () => {
            const riskQuizForm = document.getElementById('risk-quiz-form');
            const quizContainer = document.getElementById('quiz-container');
            const retakeQuizBtn = document.getElementById('retake-quiz-btn');
            const postQuizRow = document.getElementById('post-quiz-row');
            const investTabBtn = document.getElementById('invest-tab-btn');
            const toolsTabBtn = document.getElementById('tools-tab-btn');
            const investmentSection = document.getElementById('investment-ideas-section');
            const toolsSection = document.getElementById('tools-section');
            const investmentSuggestionsDiv = document.getElementById('investment-suggestions');
            const planRetirementBtn = document.getElementById('plan-retirement-btn');
            const retirementPlannerResultDiv = document.getElementById('retirement-planner-result');
            const retirementProjectionCard = document.getElementById('retirement-projection-card');
            const retirementProjectionContent = document.getElementById('retirement-projection-content');
            const addSipBtn = document.getElementById('add-sip-btn');
            const sipListDiv = document.getElementById('sip-list');
            const sipForm = document.getElementById('sip-form');
            const projectionButtonContainer = document.getElementById('projection-button-container');
            const showProjectionBtn = document.getElementById('show-projection-btn');
            let isRetirementCalculated = false;
            let sips = [];
            const quizQuestions = [ { question: "How long do you plan to invest your money?", options: [ { text: "Less than 2 years", score: 1 }, { text: "2 to 5 years", score: 2 }, { text: "5 to 10 years", score: 3 }, { text: "More than 10 years", score: 4 } ] }, { question: "What would you do if your investment dropped 20% in a month?", options: [ { text: "Sell everything", score: 1 }, { text: "Sell some of it", score: 2 }, { text: "Hold and wait", score: 3 }, { text: "Buy more", score: 4 } ] }, { question: "Which of these best describes your investment goal?", options: [ { text: "Protect my capital", score: 1 }, { text: "Generate steady income", score: 2 }, { text: "A mix of growth and safety", score: 3 }, { text: "Maximize my returns", score: 4 } ] } ];
            function generateQuiz() { const submitButton = riskQuizForm.querySelector('button[type="submit"]'); riskQuizForm.innerHTML = ''; quizQuestions.forEach((q, index) => { const questionContainer = document.createElement('div'); questionContainer.classList.add('quiz-question'); const questionElement = document.createElement('p'); questionElement.textContent = `${index + 1}. ${q.question}`; questionContainer.appendChild(questionElement); const optionsList = document.createElement('ul'); optionsList.classList.add('quiz-options'); q.options.forEach((option, i) => { const listItem = document.createElement('li'); const radioButton = document.createElement('input'); radioButton.type = 'radio'; radioButton.name = `question${index}`; radioButton.value = option.score; radioButton.id = `q${index}o${i}`; radioButton.required = true; const label = document.createElement('label'); label.htmlFor = `q${index}o${i}`; label.textContent = option.text; listItem.appendChild(radioButton); listItem.appendChild(label); optionsList.appendChild(listItem); }); questionContainer.appendChild(optionsList); riskQuizForm.appendChild(questionContainer); }); riskQuizForm.appendChild(submitButton); }
            function showInvestmentIdeas(profile) { let content = ''; if (profile === 'Conservative') { content = `<h4>Investment Ideas for a Conservative Profile</h4> <p>Your focus is on protecting your money. Consider these low-risk options:</p> <ul class="investment-list"> <li><strong>Fixed Deposits (FDs):</strong> Offers guaranteed returns and high safety.</li> <li><strong>Public Provident Fund (PPF):</strong> A long-term, government-backed savings scheme with tax benefits.</li> <li><strong>Debt Mutual Funds:</strong> Invests in fixed-income securities like government bonds, offering stable returns.</li> </ul>`; } else if (profile === 'Moderate') { content = `<h4>Investment Ideas for a Moderate Profile</h4> <p>You're looking for a balance of safety and growth. A diversified portfolio is key:</p> <ul class="investment-list"> <li><strong>Hybrid Mutual Funds:</strong> A mix of stocks and bonds to balance risk and return.</li> <li><strong>Large-Cap Equity Funds:</strong> Invests in well-established, stable companies for steady growth.</li> <li><strong>Gold Bonds:</strong> A way to invest in gold digitally, providing diversification.</li> </ul>`; } else { content = `<h4>Investment Ideas for an Aggressive Profile</h4> <p>You're willing to take on higher risk for potentially higher returns. Explore these options:</p> <ul class="investment-list"> <li><strong>Equity Mutual Funds (Mid & Small-Cap):</strong> Invest in smaller companies with high growth potential and higher risk.</li> <li><strong>Direct Stocks:</strong> Buying shares of individual companies after thorough research.</li> <li><strong>International Funds:</strong> Diversify your portfolio by investing in global markets.</li> </ul>`; } investmentSuggestionsDiv.innerHTML = content; }
            riskQuizForm.addEventListener('submit', (event) => { event.preventDefault(); quizContainer.classList.add('hidden'); postQuizRow.classList.remove('hidden'); let totalScore = 0; const formData = new FormData(riskQuizForm); for (let value of formData.values()) { totalScore += parseInt(value); } let profile = ''; let description = ''; if (totalScore <= 4) { profile = 'Conservative'; description = 'You prioritize capital preservation over growth.'; } else if (totalScore <= 8) { profile = 'Moderate'; description = 'You seek a balance between growth and safety.'; } else { profile = 'Aggressive'; description = 'You are comfortable with high risk for max returns.'; } document.getElementById('risk-profile-result').textContent = profile; document.getElementById('risk-profile-description').textContent = description; showInvestmentIdeas(profile); });
            retakeQuizBtn.addEventListener('click', () => { postQuizRow.classList.add('hidden'); quizContainer.classList.remove('hidden'); riskQuizForm.reset(); isRetirementCalculated = false; sips = []; sipListDiv.innerHTML = ''; sipForm.reset(); retirementPlannerResultDiv.classList.add('hidden'); retirementProjectionCard.classList.add('hidden'); projectionButtonContainer.classList.add('hidden'); });
            investTabBtn.addEventListener('click', () => { investmentSection.classList.remove('hidden'); toolsSection.classList.add('hidden'); investTabBtn.classList.add('active'); toolsTabBtn.classList.remove('active'); });
            toolsTabBtn.addEventListener('click', () => { toolsSection.classList.remove('hidden'); investmentSection.classList.add('hidden'); toolsTabBtn.classList.add('active'); investTabBtn.classList.remove('active'); });
            function checkCombinedEligibility() { if (isRetirementCalculated && sips.length > 0) { projectionButtonContainer.classList.remove('hidden'); } else { projectionButtonContainer.classList.add('hidden'); } }
            function calculateProjection(monthlySipTotal = 0) {
                const currentAge = parseFloat(document.getElementById('current-age').value);
                const retirementAge = parseFloat(document.getElementById('retirement-age').value);
                const currentSavings = parseFloat(document.getElementById('current-savings').value) || 0;
                const monthlyInvestment = parseFloat(document.getElementById('monthly-investment').value);
                const returnRate = parseFloat(document.getElementById('return-rate').value) / 100;
                if (isNaN(currentAge) || isNaN(retirementAge) || isNaN(monthlyInvestment) || currentAge >= retirementAge) { alert('Please ensure all Retirement Planner fields are filled correctly.'); return null; }
                const totalMonthlyInvestment = monthlyInvestment + monthlySipTotal;
                const yearsToInvest = retirementAge - currentAge;
                const n = yearsToInvest * 12;
                const r = returnRate / 12;
                const fvLumpSum = currentSavings * Math.pow(1 + r, n);
                const fvMonthly = totalMonthlyInvestment * (((Math.pow(1 + r, n) - 1) / r));
                const finalCorpus = fvLumpSum + fvMonthly;
                const principalInvestment = currentSavings + (totalMonthlyInvestment * n);
                const wealthGained = finalCorpus - principalInvestment;
                return { principalInvestment, wealthGained, finalCorpus, retirementAge };
            }
            const formatCurrency = (num) => `₹ ${num.toLocaleString('en-IN', {maximumFractionDigits: 0})}`;
            planRetirementBtn.addEventListener('click', () => {
                const data = calculateProjection(0);
                if (data) {
                    retirementPlannerResultDiv.innerHTML = `<p><span>Principal Investment:</span> <strong>${formatCurrency(data.principalInvestment)}</strong></p><p><span>Wealth Gained:</span> <strong>${formatCurrency(data.wealthGained)}</strong></p><p><span>Final Corpus:</span> <strong>${formatCurrency(data.finalCorpus)}</strong></p>`;
                    retirementPlannerResultDiv.classList.remove('hidden');
                    isRetirementCalculated = true;
                    checkCombinedEligibility();
                }
            });
            addSipBtn.addEventListener('click', () => {
                if (!sipForm.checkValidity()) { sipForm.reportValidity(); return; }
                const sipNameInput = document.getElementById('sip-name');
                const sipAmountInput = document.getElementById('sip-amount');
                const sip = { name: sipNameInput.value, amount: parseFloat(sipAmountInput.value) };
                sips.push(sip);
                const newSipElement = document.createElement('div');
                newSipElement.classList.add('sip-item');
                newSipElement.innerHTML = `<span>${sip.name}</span> <span>${formatCurrency(sip.amount)}/month</span>`;
                sipListDiv.appendChild(newSipElement);
                sipForm.reset();
                checkCombinedEligibility();
            });
            showProjectionBtn.addEventListener('click', () => {
                const totalSipAmount = sips.reduce((total, sip) => total + sip.amount, 0);
                const data = calculateProjection(totalSipAmount);
                if (data) {
                    retirementProjectionContent.innerHTML = `<div class="projection-item"><p>Principal Investment</p><p class="result-value">${formatCurrency(data.principalInvestment)}</p></div><div class="projection-item"><p>Wealth Gained</p><p class="result-value">${formatCurrency(data.wealthGained)}</p></div><div class="projection-item final-corpus"><p>Your Final Corpus at Age ${data.retirementAge}</p><p class="result-amount">${formatCurrency(data.finalCorpus)}</p></div>`;
                    retirementProjectionCard.classList.remove('hidden');
                }
            });
            generateQuiz();
        });
    </script>
</body>
</html>

